  <?php

    $formBuilder = new \Tbmt\FormBuilder('invitationForm', $this->i18nView, $this->formVal, $this->formErrors);

  ?>

  <!--
    FORM
    *************************** -->
  <?=\Tbmt\view\Factory::buildHeadingArea($this->i18nView['form_title'], 'bottom-30 top-10')?>

  <?php if ( $this->successmsg ) {
    echo \Tbmt\view\Factory::buildNotification($this->i18nView['signup_success'], $this->i18nView['success'], 'success top');
  } ?>

  <div class="row">
      <form action="<?=\Tbmt\Router::toModule('account', 'invitation_create')?>" method="post" class="form-inline form-white">

            <?php echo $formBuilder->buildInvitationTypeSelectGroup('type', $this->member->getType()); ?>

            <?php echo $formBuilder->buildFieldGroup('free_signup', 'checkbox'); ?>

          <div class="field">
            <?=\Tbmt\view\Factory::buildSubmitBtn($this->i18nView['submit'], 'blue')?>
          </div>

          <div class="clearfix"></div>
      </form>
  </div>


  <!--
    LIST OF INVITATIONS
    *************************** -->
  <div class="row">
      <?=\Tbmt\view\Factory::buildHeadingArea($this->i18nView['list_title'])?>

      <table class="table">
        <tbody>
            <tr>
              <th><?=$this->i18nView['hash']?></th>
              <th><?=$this->i18nView['type']?></th>
              <th><?=$this->i18nView['free_signup']?></th>
              <th><?=$this->i18nView['creation_date']?></th>
              <th><?=$this->i18nView['accepted_date']?></th>
            </tr>
        <?php

        $memberTypes = \Tbmt\Localizer::get('common.member_types');
        foreach ( $this->invitations as $invitation ) {
          echo '<tr>';
            echo '<td class="code">'.$invitation->getHash().'</td>';
            echo '<td>'.$memberTypes[$invitation->getType()].'</td>';
            echo '<td>'.($invitation->getFreeSignup() ? '<i class="fa fa-check" />' : '<i class="fa fa-times" />').'</td>';
            echo '<td>'.date($this->invitationDateFormat, $invitation->getCreationDate('U')).'</td>';
            echo '<td>'.($invitation->getAcceptedDate() ? '<i class="fa fa-check" />' : '<i class="fa fa-times" />').'</td>';
          echo '</tr>';

        }

        ?>
        </tbody>
      </table>
  </div>